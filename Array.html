<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <ul class="list">

    </ul>

    <script>
        const people = [
            {
                name: '卡斯伯',
                order: '鍋燒意麵',
                price: 80
            },
            {
                name: '小明',
                order: '牛肉麵',
                price: 120
            },
            {
                name: '漂亮阿姨',
                order: '滷味切盤',
                price: 40
            },
            {
                name: 'Ray',
                order: '大麻醬乾麵',
                price: 60
            },
        ];

        //1.請一一列出每個人的訂單
        // people.forEach(function(obj,key){
        //   console.log(`${obj.name}吃了${obj.order}花了${obj.price}`);
        // });


        //2.小明看到今天有打八折！！，請將所有訂單新增一個新價格，金額是 80%
        //2-1 forEach
        // const newOrders =[];
        // people.forEach(function(obj,key){
        //     newOrders[key] ={
        //         ...obj,
        //         newPrice:obj.price *0.8
        //     }
        // });

        //2-2 map
        // const newOrders = people.map(function(item,index){
        //     return {
        //         ...item,
        //         newPrice:item.price *0.8
        //     }
        // });
        // console.log(newOrders);

        //2-3 箭頭函式
        const newOrders = people.map((item, index) => ({
            ...item,
            newPrice: item.price * 0.8
        }));
        console.log(newOrders);


        //3.老闆說，今天疫情沒有八折啦，不過 80 元的可以給滷蛋
        // 3-1 forEach
        // const newOrders2 =[];
        // people.forEach(function(item,index){
        //     if(item.price >= 80){
        //         newOrders2.push(item);
        //     }
        // });
        // console.log(newOrders2);


        // 3-2 filter
        // const newOrders2 = people.filter(function(item,index){
        //     return item.price >= 80; //為真的,會回傳該物件
        // })

        // 3-3 箭頭函示

        const newOrders2 = people.filter((item) => item.price >= 80);
        console.log(newOrders2);




        //4. 過一段時間後，老闆發現牛肉沒了，把點牛肉麵的換成牛肉湯麵


        // const index = 0;
        // 4-1 forEach   
        // people.forEach(function(obj,key){
        //     if(obj.order === '牛肉麵'){
        //         index = key;
        //     }
        // });
        // people[index].order ="牛肉湯麵";
        // console.log(people[index].order);

        // 4-2  findIndex   只會找到一個  
        // const index = people.findIndex(function(item){
        //     return item.order === '牛肉麵'
        // })
        // people[index].order ="牛肉湯麵";

        //4-3 findIndex  + 箭頭函式    
        const index = people.findIndex(item => item.order === '牛肉麵');

        people[index].order = "牛肉湯麵";
        console.log(people[index].order);



        //5. 老闆說 POS 機壞了，麻煩幫忙出一下 LI 結構，方便列印發票
        // let htmlTemplate='';
        // let list =document.querySelector('.list');

        // people.forEach(function(obj,key){

        //     htmlTemplate+=`<li>餐點:${obj.order}    價錢 :${obj.price}</li>`;
        // });
        // list.innerHTML = htmlTemplate;

        //  //5-2 進階語法
        //  let htmlTemplate='';

        // htmlTemplate = people.map(function(obj,key){

        //    return `<li>餐點:${obj.order}    價錢 :${obj.price}</li>`;
        // }).join('');

        // console.log(htmlTemplate);


        //5-3 進階語法  +箭頭   //join  map中常用 把陣列轉字串
        let htmlTemplate = '';

        htmlTemplate = people.map((obj, key) => `<li>
             餐點:${obj.order}   
             價錢 :${obj.price}</li>`).join('');




        console.log(htmlTemplate);

        //6. 老闆要收錢了，請問老闆應該收多少錢
        //6-1 foreach
        // let Total =0;
        // people.forEach(function(obj,key){

        //     Total+= obj.price;
        //         });
         // console.log(Total);


        // 6-2 reduce
        const Total = people.reduce((acc,cur) => acc + cur.price,0);
            

        console.log(Total);
         //7. 今天誰吃最貴！請排序所有的金額

         const peopleSort = people.sort((a,b) => {
             return a.price - b.price ; //由小到大
            //  return b.price - a.price ; //由大到小
         })
         console.log(peopleSort);

    </script>
</body>

</html>